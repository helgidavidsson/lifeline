

var exData = 
    
[
   
   
   
   
   
   
   
   
   
   
    ["Afghanistan",158,65.98,67.59,64.47  ],
    ["Albania",49,78.96,80.48,77.48  ],
    ["Algeria",63,77.5,78.76,76.3  ],
    ["Angola",177,62.22,65.12,59.46  ],
    ["Antigua and Barbuda",64,77.47,78.58,76.26  ],
    ["Argentina",71,77.17,80.42,73.82  ],
    ["Armenia",87,75.55,78.9,71.82  ],
    ["Aruba",72,76.79,79.1,74.26  ],
    ["Australia",8,83.94,85.8,82.08  ],
    ["Austria",26,82.05,84.19,79.88  ],
    ["Azerbaijan",112,73.33,75.87,70.76  ],
    ["Bahamas",100,74.28,76.51,71.95  ],
    ["Bahrain",60,77.73,78.88,76.87  ],
    ["Bangladesh",109,73.57,75.6,71.8  ],
    ["Barbados",42,79.64,80.85,78.36  ],
    ["Belarus",92,75.2,79.9,70.15  ],
    ["Belgium",25,82.17,84.31,80  ],
    ["Belize",93,75.09,78.25,72.14  ],
    ["Benin",174,62.84,64.45,61.23  ],
    ["Bhutan",116,72.77,73.33,72.27  ],
    ["Bolivia",120,72.35,75.35,69.5  ],
    ["Bosnia and Herzegovina",57,77.93,80.32,75.48  ],
    ["Botswana",140,69.86,72.69,66.72  ],
    ["Brazil",75,76.57,80.14,73.01  ],
    ["Brunei",79,76.35,77.64,75.17  ],
    ["Bulgaria",89,75.49,79.06,72.05  ],
    ["Burkina Faso",173,62.98,63.78,62.06  ],
    ["Burundi",175,62.71,64.56,60.85  ],
    ["Cabo Verde",108,73.58,76.83,70.15  ],
    ["Cambodia",134,70.54,72.69,68.2  ],
    ["Cameroon",183,60.32,61.66,58.99  ],
    ["Canada",16,82.96,84.74,81.15  ],
    ["Central African Republic",193,54.36,56.58,52.16  ],
    ["Chad",192,55.17,56.65,53.73  ],
    ["Channel Islands",9,83.6,85.31,81.82  ],
    ["Chile",36,80.74,82.8,78.54  ],
    ["China",64,77.47,79.73,75.36  ],
    ["Colombia",58,77.87,80.54,75.18  ],
    ["Comoros",163,65.03,66.88,63.24  ],
    ["Congo",162,65.21,66.73,63.67  ],
    ["Costa Rica",35,80.94,83.39,78.53  ],
    ["Côte d'Ivoire",186,58.75,60.13,57.5  ],
    ["Croatia",48,79.02,82.02,75.95  ],
    ["Cuba",45,79.18,81.12,77.25  ],
    ["Curaçao",43,79.41,82.08,76.42  ],
    ["Cyprus",31,81.51,83.45,79.55  ],
    ["Czech Republic (Czechia)",41,79.85,82.35,77.33  ],
    ["Denmark",32,81.4,83.27,79.54  ],
    ["Djibouti",148,67.87,70.16,65.84  ],
    ["Dominican Republic",97,74.65,77.9,71.58  ],
    ["DR Congo",180,61.6,63.21,60.01  ],
    ["Ecuador",61,77.71,80.45,75.05  ],
    ["Egypt",118,72.54,74.95,70.23  ],
    ["El Salvador",103,74.06,78.48,69.27  ],
    ["Equatorial Guinea",184,59.82,61.08,58.76  ],
    ["Eritrea",152,67.48,69.75,65.26  ],
    ["Estonia",45,79.18,83.06,74.98  ],
    ["Eswatini",181,61.05,65.67,56.98  ],
    ["Ethiopia",149,67.81,69.8,65.86  ],
    ["Faroe Islands",0,81.04,83.44,78.5  ],
    ["Fiji",147,67.91,69.97,66  ],
    ["Finland",24,82.48,85.14,79.82  ],
    ["France",14,83.13,85.82,80.32  ],
    ["French Guiana",39,80.53,83.38,77.8  ],
    ["French Polynesia",54,78.23,80.41,76.23  ],
    ["Gabon",154,67.03,69.27,64.93  ],
    ["Gambia",172,63.26,64.73,61.8  ],
    ["Georgia",101,74.24,78.54,69.85  ],
    ["Germany",27,81.88,84.14,79.62  ],
    ["Ghana",166,64.94,66.13,63.78  ],
    ["Greece",19,82.8,85.08,80.52  ],
    ["Grenada",117,72.59,75.16,70.24  ],
    ["Guadeloupe",22,82.74,85.94,79.16  ],
    ["Guam",36,80.74,83.98,77.63  ],
    ["Guatemala",94,75.05,77.89,72.14  ],
    ["Guinea",176,62.64,63.25,61.79  ],
    ["Guinea-Bissau",185,59.38,61.33,57.31  ],
    ["Guyana",137,70.26,73.53,67.22  ],
    ["Haiti",165,64.99,67.21,62.77  ],
    ["Honduras",82,75.87,78.14,73.57  ],
    ["Hong Kong",1,85.29,88.17,82.38  ],
    ["Hungary",70,77.31,80.66,73.78  ],
    ["Iceland",10,83.52,84.9,82.15  ],
    ["India",136,70.42,71.8,69.16  ],
    ["Indonesia",122,72.32,74.64,70.12  ],
    ["Iran",69,77.33,78.54,76.22  ],
    ["Iraq",131,71.08,73.21,68.96  ],
    ["Ireland",18,82.81,84.32,81.29  ],
    ["Israel",12,83.49,84.91,81.98  ],
    ["Italy",6,84.01,85.97,81.9  ],
    ["Jamaica",96,74.88,76.6,73.17  ],
    ["Japan",2,85.03,88.09,81.91  ],
    ["Jordan",95,75.01,76.82,73.28  ],
    ["Kazakhstan",105,73.9,77.97,69.55  ],
    ["Kenya",153,67.47,69.87,65.04  ],
    ["Kiribati",141,69.17,73.12,65  ],
    ["Kuwait",83,75.85,77.06,75.09  ],
    ["Kyrgyzstan",126,71.95,76.03,67.85  ],
    ["Laos",142,68.89,70.79,67.04  ],
    ["Latvia",85,75.73,80.37,70.81  ],
    ["Lebanon",44,79.27,81.17,77.53  ],
    ["Lesotho",191,55.65,58.9,52.52  ],
    ["Liberia",164,65,66.48,63.54  ],
    ["Libya",110,73.44,76.46,70.61  ],
    ["Lithuania",78,76.41,81.7,70.97  ],
    ["Luxembourg",20,82.79,84.76,80.83  ],
    ["Macao",3,84.68,87.62,81.73  ],
    ["Madagascar",146,68.21,69.92,66.53  ],
    ["Malawi",159,65.62,68.77,62.45  ],
    ["Malaysia",74,76.65,78.78,74.71  ],
    ["Maldives",40,79.89,81.58,78.53  ],
    ["Mali",182,60.54,61.39,59.69  ],
    ["Malta",15,83.06,84.68,81.37  ],
    ["Martinique",14,83.13,86.1,79.85  ],
    ["Mauritania",160,65.57,67.24,63.88  ],
    ["Mauritius",88,75.51,78.92,72.21  ],
    ["Mayotte",41,79.85,83.24,76.62  ],
    ["Mexico",90,75.41,78.17,72.62  ],
    ["Micronesia",102,74.08,77.2,71.14  ],
    ["Moldova",123,72.3,76.53,68.02  ],
    ["Mongolia",135,70.53,74.79,66.43  ],
    ["Montenegro",67,77.39,79.77,74.99  ],
    ["Morocco",66,77.43,78.66,76.17  ],
    ["Mozambique",179,62.13,64.95,59.05  ],
    ["Myanmar",151,67.78,70.81,64.65  ],
    ["Namibia",168,64.86,67.67,61.83  ],
    ["Nepal",128,71.74,73.23,70.13  ],
    ["Netherlands",21,82.78,84.35,81.2  ],
    ["New Caledonia",55,78.16,80.89,75.61  ],
    ["New Zealand",19,82.8,84.38,81.2  ],
    ["Nicaragua",91,75.23,78.65,71.75  ],
    ["Niger",171,63.62,64.89,62.41  ],
    ["Nigeria",190,55.75,56.75,54.8  ],
    ["North Korea",115,72.89,76.37,69.26  ],
    ["North Macedonia",80,76.26,78.32,74.26  ],
    ["Norway",17,82.94,84.78,81.11  ],
    ["Oman",50,78.58,80.94,76.9  ],
    ["Pakistan",150,67.79,68.9,66.77  ],
    ["State of Palestine",98,74.62,76.38,72.92  ],
    ["Panama",47,79.1,82.2,76.14  ],
    ["Papua New Guinea",161,65.22,66.62,63.92  ],
    ["Paraguay",99,74.59,76.78,72.55  ],
    ["Peru",65,77.44,80.15,74.87  ],
    ["Philippines",129,71.66,75.92,67.67  ],
    ["Poland",44,79.27,82.98,75.51  ],
    ["Portugal",23,82.65,85.28,79.79  ],
    ["Puerto Rico",38,80.69,83.92,77.27  ],
    ["Qatar",37,80.73,82.49,79.78  ],
    ["Réunion",30,81.55,84.45,78.52  ],
    ["Romania",76,76.5,79.91,73.13  ],
    ["Russia",113,72.99,78.15,67.62  ],
    ["Rwanda",139,70,72.16,67.75  ],
    ["Saint Lucia",73,76.67,78.06,75.27  ],
    ["Samoa",106,73.75,75.97,71.69  ],
    ["Sao Tome & Principe",132,71.01,73.5,68.54  ],
    ["Saudi Arabia",86,75.69,77.37,74.47  ],
    ["Senegal",143,68.87,70.88,66.64  ],
    ["Serbia",77,76.47,79.05,73.89  ],
    ["Seychelles",107,73.74,77.71,70.26  ],
    ["Sierra Leone",189,55.92,56.78,55.01  ],
    ["Singapore",5,84.07,86.15,82.06  ],
    ["Slovakia",56,78,81.35,74.59  ],
    ["Slovenia",28,81.85,84.44,79.26  ],
    ["Solomon Islands",111,73.38,75.31,71.6  ],
    ["Somalia",188,58.34,60.11,56.62  ],
    ["South Africa",167,64.88,68.42,61.46  ],
    ["South Korea",11,83.5,86.42,80.46  ],
    ["South Sudan",187,58.74,60.31,57.21  ],
    ["Spain",7,83.99,86.68,81.27  ],
    ["Sri Lanka",62,77.56,80.74,74.25  ],
    ["St. Vincent & Grenadines",114,72.98,75.62,70.66  ],
    ["Sudan",157,66.09,68.03,64.18  ],
    ["Suriname",124,72.13,75.55,68.88  ],
    ["Sweden",13,83.33,84.97,81.69  ],
    ["Switzerland",4,84.25,86.02,82.42  ],
    ["Syria",81,76.06,79.11,73.13  ],
    ["Taiwan",34,81.04,83.64,78.49  ],
    ["Tajikistan",127,71.76,74.11,69.5  ],
    ["Tanzania",156,66.39,68.25,64.52  ],
    ["Thailand",59,77.74,81.34,74.16  ],
    ["Timor-Leste",138,70.18,72.36,68.14  ],
    ["Togo",179,62.13,63.08,61.16  ],
    ["Tonga",130,71.32,73.38,69.28  ],
    ["Trinidad and Tobago",104,73.91,76.66,71.24  ],
    ["Tunisia",68,77.36,79.34,75.37  ],
    ["Turkey",52,78.45,81.21,75.57  ],
    ["Turkmenistan",144,68.63,72.19,65.1  ],
    ["U.S. Virgin Islands",33,81.17,83.52,78.64  ],
    ["Uganda",170,64.38,66.67,61.99  ],
    ["Ukraine",119,72.5,77.27,67.56  ],
    ["United Arab Emirates",51,78.46,79.8,77.79  ],
    ["United Kingdom",29,81.77,83.28,80.22  ],
    ["United States",46,79.11,81.65,76.61  ],
    ["Uruguay",53,78.43,81.88,74.75  ],
    ["Uzbekistan",125,72.04,74.26,69.8  ],
    ["Vanuatu",133,70.99,72.75,69.4  ],
    ["Venezuela",121,72.34,76.25,68.59  ],
    ["Vietnam",84,75.77,79.85,71.73  ],
    ["Western Sahara",131,71.08,73.19,69.36  ],
    ["Yemen",155,66.44,68.16,64.72  ],
    ["Zambia",169,64.7,67.71,61.66  ],
    ["Zimbabwe",178,62.16,63.66,60.39  ]
  ]

const country = document.getElementById('country')

const female = document.getElementById('female')

const male = document.getElementById('male')

const userLifeEx = document.getElementById('userLifeEx')

const dateOfBirth = document.getElementById('dateOfBirth')

var userAge = document.getElementById('userAge')

var displayUserPercent = document.getElementById('displayUserPercent')





var today = new Date();
    var todaydd = String(today.getDate()).padStart(2, '0');
    var todaymm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
    var todayyyyy = today.getFullYear();



displayUserPercent.innerText = '0%'





var selectedGender = ''


female.addEventListener('click', () => {
    selectedGender = 'female'
    findLifeEx()
    loadBar()
})

male.addEventListener('click', () => {
    selectedGender = 'male'
    findLifeEx()
    loadBar()
})


var femaleDiv = document.getElementById('femaleDiv')

var maleDiv = document.getElementById('maleDiv')



femaleDiv.addEventListener('click', () => {
    femaleDiv.style.opacity = '1'
    maleDiv.style.opacity = '0.3'
} )

maleDiv.addEventListener('click', () => {
    maleDiv.style.opacity = '1'
    femaleDiv.style.opacity = '0.3'
    
} )



femaleDiv.addEventListener('mouseover', () => {
    femaleDiv.style.opacity = '1'
})




maleDiv.addEventListener('mouseover', () => {
    maleDiv.style.opacity = '1'
})


femaleDiv.addEventListener('mouseout', () => {
    if (selectedGender == 'male') {
        femaleDiv.style.opacity = '0.3'
    } else if (selectedGender == 'female') {
        femaleDiv.style.opacity = '1'
    } else {
        femaleDiv.style.opacity = '0.3'
    }
    
})


maleDiv.addEventListener('mouseout', () => {
    if (selectedGender == 'female') {
        maleDiv.style.opacity = '0.3'
    } else if (selectedGender == 'male'){
        maleDiv.style.opacity = '1'
    } else {
        maleDiv.style.opacity = '0.3'
    }
    
})



userLifeEx.innerText = '00.00'

 userAge.innerText = '00.00'

var userCountryRank = document.getElementById('userCountryRank')

var sleepLabel = document.getElementById('sleepLabel')


country.addEventListener('change', () => {
    
    


    for(let i=0; i < 202; i++) {
        
        if(country.value == i){
            userCountryRank.innerText = 'World Rank #'+ exData [i][1]

        } else if (country.value == '59') {
            userCountryRank.innerText = ''

        } else if(country.value == 'n') {
            userCountryRank.innerText= ''
        }
    }
    

} )

function findLifeEx() {
    userLifeEx.innerText = '00.00'

    

    for (let i = 0; i < 202; i++) {
        
        if (country.value == i && selectedGender == 'female') {
        userLifeEx.innerText = exData[i][3]
       
        
    } else if (country.value == i && selectedGender == 'male') {
        userLifeEx.innerText = exData[i][4]
       
    } 
    } 

    loadBar()
}



dateOfBirth.addEventListener('change', () => {
     
    var dateValue = dateOfBirth.value
   
  
    var dateOfBirthdd = dateValue.split('-')[2]
    var dateOfBirthmm = dateValue.split('-')[1]
    var dateOfBirthyyyy = dateValue.split('-')[0]

    var userAgeYears = todayyyyy - dateOfBirthyyyy
    var userAgeMonths = todaymm - dateOfBirthmm + 1 //+1 bc january starts at 0
    var userAgeDays = todaydd - dateOfBirthdd

   var daysThisYear = 30.4375 * userAgeMonths + userAgeDays

   var daysThisYearPer = daysThisYear / 365.24

    userAge.innerText = (Math.round((userAgeYears + daysThisYearPer) * 100) /100).toFixed(2)



   var userDaysLeft = userLifeEx.innerText - userAge

   loadBar()

   
 
})

var userSleep = document.getElementById('userSleep')
userSleep.addEventListener('change', () => {
    var dateValue = dateOfBirth.value
   
    
    var dateOfBirthdd = dateValue.split('-')[2]
    var dateOfBirthmm = dateValue.split('-')[1]
    var dateOfBirthyyyy = dateValue.split('-')[0]

    var userAgeYears = todayyyyy - dateOfBirthyyyy
    var userAgeMonths = todaymm - dateOfBirthmm + 1 //+1 bc january starts at 0
    var userAgeDays = todaydd - dateOfBirthdd

   var daysThisYear = 30.4375 * userAgeMonths + userAgeDays

   
    var totalDaysLived = userAgeYears * 365.24 + daysThisYear
    var totalHoursLived = totalDaysLived * 24

    var sleepProgress = document.getElementById('sleepProgress')


    
    for (let i=1; i < 13; i++) {
        if (userSleep.value == [i]) {
            var sleepPercent = ([i] * totalDaysLived / totalHoursLived) * 100
            sleepProgress.style.width = sleepPercent + '%'
            console.log(sleepPercent)
            sleepLabel.style.display = 'block'
            
        } else if( userSleep.value == "0") {
            sleepProgress.style.width = '0%'
            sleepLabel.style.display = 'none'
        }
    }
    

})

var userWork = document.getElementById('userWork')
var workStart = document.getElementById('workStart') 

userWork.addEventListener('change', () => {
    loadWork()
})


workStart.addEventListener('change', () => {
    loadWork()
})


function loadWork() {


    var dateValue = dateOfBirth.value
   
    
    var dateOfBirthdd = dateValue.split('-')[2]
    var dateOfBirthmm = dateValue.split('-')[1]
    var dateOfBirthyyyy = dateValue.split('-')[0]

    var userAgeYears = todayyyyy - dateOfBirthyyyy
    var userAgeMonths = todaymm - dateOfBirthmm + 1 //+1 bc january starts at 0
    var userAgeDays = todaydd - dateOfBirthdd

    var daysThisYear = 30.4375 * userAgeMonths + userAgeDays



    var userAgeWeeks = (userAge.innerText * 365.24) / 7

    var workStartSince = (todayyyyy - workStart.value + (todaymm / 12)) // in years

    var workHours = userWork.value / 168 // Fraction of work hours per week

    var yearsWorked = (workStartSince * workHours)
    
    
    var workPercentage = (yearsWorked / userAge.innerText) * 100
	
var workLabel = document.getElementById('workLabel')

if (userWork.value == 0) {
	workLabel.style.display = 'none'
} else {
    workLabel.style.display = 'block'
}

    var workProgress = document.getElementById('workProgress').style.width = workPercentage + '%'
    
    
}

var screenTimeLabel = document.getElementById('screenTimeLabel')
var userScreenTime = document.getElementById('userScreenTime')
var userFirstPhone = document.getElementById('userFirstPhone')
userScreenTime.addEventListener('change', () => {
    findScreenTime()

})

userFirstPhone.addEventListener('change', () => {
    findScreenTime()
})

function findScreenTime() {
    var dateValue = dateOfBirth.value
    
        
        var dateOfBirthdd = dateValue.split('-')[2]
        var dateOfBirthmm = dateValue.split('-')[1]
        var dateOfBirthyyyy = dateValue.split('-')[0]

        var userAgeYears = todayyyyy - dateOfBirthyyyy
        var userAgeMonths = todaymm - dateOfBirthmm + 1 //+1 bc january starts at 0
        var userAgeDays = todaydd - dateOfBirthdd

        var daysThisYear = 30.4375 * userAgeMonths + userAgeDays

    
        var totalDaysLived = userAgeYears * 365.24 + daysThisYear

        var totalHoursLived = totalDaysLived * 24

        var yearsSincePhone = userFirstPhone.value - dateOfBirthyyyy
        var  daysSincePhone = totalDaysLived - yearsSincePhone * 365.24  
        var hoursSincePhone = daysSincePhone * 24


        var screenTimeProgress = document.getElementById('screenTimeProgress')


        
        for (let i=1; i < 13; i++) {
            if (userScreenTime.value == [i]) {
                var screenTimePercent = ([i] * daysSincePhone / hoursSincePhone) * 100
                screenTimeProgress.style.width = screenTimePercent + '%'
                screenTimeLabel.style.display = 'block'
                

                
            } else if( userScreenTime.value == "0") {
                screenTimeProgress.style.width = '0%'
                screenTimeLabel.style.display = 'none'
            }
        }
    
}




function loadBar() {



    var userPercentLife = (userAge.innerText / userLifeEx.innerText) * 100

    

    
    var progressBar = document.getElementById('lifeProgress')

   
    if (userPercentLife <= 100) {
        progressBar.style.width = userPercentLife + '%'
        console.log(userPercentLife)
        displayUserPercent.innerText = Math.trunc(userPercentLife)  + '%'
        
    } else if (userPercentLife <= 150) {
        progressBar.style.width = '100%'
    } else if (userPercentLife > 150 ) {
        progressBar.style.width = '0%'
    }
    





}
